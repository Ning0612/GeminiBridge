# GeminiBridge Python - Environment Configuration Example
# Copy this file to .env and customize values

# Server Configuration
PORT=11434
HOST=127.0.0.1

# Security (REQUIRED)
# IMPORTANT: Change this to a strong random token (32+ characters)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
BEARER_TOKEN=your-secret-token-here-change-this-in-production

# Gemini CLI Configuration
# Path to Gemini CLI executable
# Default: 'gemini' (assumes in PATH)
# Windows example: C:\Users\YourName\AppData\Roaming\npm\gemini.cmd
# Linux/Mac example: /usr/local/bin/gemini
GEMINI_CLI_PATH=C:\Users\YourName\AppData\Roaming\npm\gemini.cmd

# Timeout in seconds (default: 30)
GEMINI_CLI_TIMEOUT=30

# ============================================================================
# Concurrency and Rate Limiting
# ============================================================================

# Rate Limiting
# Max requests per window per IP
RATE_LIMIT_MAX_REQUESTS=100
# Window size in seconds
RATE_LIMIT_WINDOW_SECONDS=60

# Concurrency Control
# Max concurrent CLI processes (default: 5)
# Recommended: 8-12 for dual-core CPU, 15-20 for quad-core+
# With new optimizations (smart delays), higher values are safer
MAX_CONCURRENT_REQUESTS=10

# Queue timeout in seconds (default: 30)
QUEUE_TIMEOUT=30

# Minimum gap between requests in milliseconds (default: 500)
# Helps prevent Docker container naming conflicts
# Reduce to 200-300 for higher throughput (may increase conflicts)
# Increase to 800-1000 for maximum stability
MIN_REQUEST_GAP_MS=500

# ============================================================================
# Logging Configuration
# ============================================================================

# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Enable debug mode (more verbose logging)
DEBUG=false

# Log file retention in days (old logs will be automatically deleted)
LOG_RETENTION_DAYS=7


# ============================================================================
# Retry and Cleanup Configuration
# ============================================================================

# Maximum retry attempts for Docker conflicts (default: 3)
CLI_MAX_RETRIES=3

# Cleanup wait time in milliseconds (default: 200)
# Increase if experiencing frequent container conflicts (500-800 recommended)
CLI_CLEANUP_WAIT_MS=500

# Enable proactive container cleanup before each request (default: true)
ENABLE_PROACTIVE_CLEANUP=true

# Docker cleanup timeout in seconds (default: 10)
DOCKER_CLEANUP_TIMEOUT=10
